(function(){"use strict";let s;function R(e){const t=s.__externref_table_alloc();return s.__wbindgen_export_2.set(t,e),t}function O(e,t){try{return e.apply(this,t)}catch(n){const r=R(n);s.__wbindgen_exn_store(r)}}const T=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&T.decode();let f=null;function d(){return(f===null||f.byteLength===0)&&(f=new Uint8Array(s.memory.buffer)),f}function l(e,t){return e=e>>>0,T.decode(d().subarray(e,e+t))}let b=0;const y=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},U=typeof y.encodeInto=="function"?function(e,t){return y.encodeInto(e,t)}:function(e,t){const n=y.encode(e);return t.set(n),{read:e.length,written:n.length}};function m(e,t,n){if(n===void 0){const _=y.encode(e),g=t(_.length,1)>>>0;return d().subarray(g,g+_.length).set(_),b=_.length,g}let r=e.length,i=t(r,1)>>>0;const c=d();let o=0;for(;o<r;o++){const _=e.charCodeAt(o);if(_>127)break;c[i+o]=_}if(o!==r){o!==0&&(e=e.slice(o)),i=n(i,r,r=o+e.length*3,1)>>>0;const _=d().subarray(i+o,i+r),g=U(e,_);o+=g.written,i=n(i,r,o,1)>>>0}return b=o,i}let u=null;function p(){return(u===null||u.buffer.detached===!0||u.buffer.detached===void 0&&u.buffer!==s.memory.buffer)&&(u=new DataView(s.memory.buffer)),u}function x(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){const i=e.length;let c="[";i>0&&(c+=x(e[0]));for(let o=1;o<i;o++)c+=", "+x(e[o]);return c+="]",c}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(n&&n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function k(e){s.set_input_buffer(e)}function I(){s.set_panic_hook()}const S=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_pasmexecutor_free(e>>>0,1));class M{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,S.unregister(this),t}free(){const t=this.__destroy_into_raw();s.__wbg_pasmexecutor_free(t,0)}constructor(t,n){const r=m(t,s.__wbindgen_malloc,s.__wbindgen_realloc),i=b,c=s.pasmexecutor_new(r,i,n);return this.__wbg_ptr=c>>>0,S.register(this,this.__wbg_ptr,this),this}get input_enabled(){return s.pasmexecutor_input_enabled(this.__wbg_ptr)!==0}run_without_input(){s.pasmexecutor_run_without_input(this.__wbg_ptr)}step(){return s.pasmexecutor_step(this.__wbg_ptr)}}async function W(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function D(){const e={};return e.wbg={},e.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return t.buffer},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return O(function(t,n,r){return t.call(n,r)},arguments)},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let r,i;try{r=t,i=n,console.error(l(t,n))}finally{s.__wbindgen_free(r,i,1)}},e.wbg.__wbg_length_a446193dc22c12f8=function(t){return t.length},e.wbg.__wbg_log_50ee3bbd2dfcb5f1=function(t,n){console.log(l(t,n))},e.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_new_a12002a7f91c75be=function(t){return new Uint8Array(t)},e.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(t,n,r){return new Uint8Array(t,n>>>0,r>>>0)},e.wbg.__wbg_set_3f1d0b984ed272ed=function(t,n,r){t[n]=r},e.wbg.__wbg_set_65595bdd868b3009=function(t,n,r){t.set(n,r>>>0)},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){const r=n.stack,i=m(r,s.__wbindgen_malloc,s.__wbindgen_realloc),c=b;p().setInt32(t+4*1,c,!0),p().setInt32(t+4*0,i,!0)},e.wbg.__wbindgen_debug_string=function(t,n){const r=x(n),i=m(r,s.__wbindgen_malloc,s.__wbindgen_realloc),c=b;p().setInt32(t+4*1,c,!0),p().setInt32(t+4*0,i,!0)},e.wbg.__wbindgen_init_externref_table=function(){const t=s.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_memory=function(){return s.memory},e.wbg.__wbindgen_number_new=function(t){return t},e.wbg.__wbindgen_string_new=function(t,n){return l(t,n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(l(t,n))},e}function P(e,t){return s=e.exports,A.__wbindgen_wasm_module=t,u=null,f=null,s.__wbindgen_start(),s}async function A(e){if(s!==void 0)return s;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL(""+new URL("assets/cambridge_asm_wasm_bg-CQc-QWea.wasm",self.location.href).href,self.location.href));const t=D();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await W(await e,t);return P(n,r)}const j="ready",F="status",L="output",N="error",$="init",C="step",z="input_response",V="run",q=1;function h(e,t){return{code:e,data:t}}const B=e=>h(j,{input_enabled:e}),E=e=>h(F,{status:e}),H=e=>h(L,{buf:e}),Q=e=>h(N,{e}),a=e=>postMessage(e);let w=null;onmessage=async({data:e})=>{switch(console.log(e),e.code){case $:await A(),I();try{w=new M(e.data.prog,t=>a(H(t))),a(B(w.input_enabled))}catch(t){a(Q(t.toString()))}break;case C:a(E(w.step()));break;case z:k(e.data.input),a(E(w.step()));break;case V:w.run_without_input(),a(E({status:q,data:void 0}));break}}})();
